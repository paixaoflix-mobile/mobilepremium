<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebTV Player - Clappr</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üî•</text></svg>">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://www.gstatic.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https:;">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: #141414;
            color: white;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px 50px;
            background: linear-gradient(180deg, rgba(20,20,20,0.7) 10%, rgba(20,20,20,0) 100%);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #e50914;
        }

        .nav {
            display: flex;
            gap: 30px;
        }

        .nav a {
            color: white;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s;
        }

        .nav a:hover {
            color: #e50914;
        }

        .nav a.active {
            color: #e50914;
            font-weight: bold;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-icon {
            width: 32px;
            height: 32px;
            background: #e50914;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Content */
        .content {
            margin-top: 80px;
            padding: 20px 50px;
        }

        /* Player Container */
        .player-container {
            max-width: 1200px;
            margin: 0 auto 40px;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        .player-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
        }

        #player {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Video Info */
        .video-info {
            padding: 30px;
            background: #1a1a1a;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .video-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .video-meta {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #ccc;
        }

        .video-description {
            font-size: 16px;
            line-height: 1.6;
            color: #ddd;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #e50914;
            color: white;
        }

        .btn-primary:hover {
            background: #f40612;
        }

        .btn-secondary {
            background: #333;
            color: white;
        }

        .btn-secondary:hover {
            background: #444;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #e50914;
        }

        /* Settings Panel */
        .settings-panel {
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            color: white;
        }

        .settings-panel h3 {
            color: #e50914;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .setting-group {
            margin-bottom: 15px;
        }

        .setting-group label {
            display: block;
            margin-bottom: 5px;
            color: #ccc;
            font-size: 14px;
        }

        .setting-group select,
        .setting-group input[type="range"] {
            width: 100%;
            padding: 8px;
            background: #333;
            border: 1px solid #555;
            border-radius: 4px;
            color: white;
            margin-top: 5px;
        }

        .setting-group input[type="checkbox"] {
            margin-right: 8px;
        }

        #volume-value {
            margin-left: 10px;
            color: #e50914;
            font-weight: bold;
        }

        /* Installation Status */
        .installation-status {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .status-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #e50914;
        }

        .plugin-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 10px;
        }

        .plugin-item {
            background: #333;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .plugin-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #46d369;
        }

        .plugin-status.loading {
            background: #ffa500;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
            }

            .nav {
                display: none;
            }

            .content {
                padding: 20px;
            }

            .video-title {
                font-size: 24px;
            }

            .controls {
                flex-direction: column;
            }
        }

        .content-info {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }

        .content-info h2 {
            color: #e50914;
            margin-bottom: 10px;
            font-size: 24px;
        }

        .content-info p {
            color: #ccc;
            font-size: 14px;
        }

        .controls {
            flex-direction: column;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">üî• WebTV</div>
        <nav class="nav">
            <a href="index.html">Home</a>
            <a href="cinema.html">Cinema</a>
            <a href="series.html">S√©ries</a>
            <a href="filmes.html">Filmes</a>
            <a href="filmes-kids.html">Filmes Kids</a>
            <a href="series-kids.html">S√©ries Kids</a>
            <a href="mylist.html">Meus Favoritos</a>
            <a href="tv-ao-vivo.html">TV ao Vivo</a>
            <a href="player.html">Player</a>
        </nav>
        <div class="nav-right">
            <div class="user-icon">U</div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="hero">
        <div class="hero-content">
            <h1 class="hero-title" id="hero-title">üé¨ Player</h1>
            <div class="hero-meta" id="hero-meta">
                <span class="match">100% Streaming</span>
                <span>2024</span>
                <span class="rating">üé•</span>
                <span id="hero-duration">Player Premium</span>
            </div>
            <div class="hero-buttons">
                <button class="btn btn-play" id="btn-play" onclick="loadSampleVideo()">
                    <span>‚ñ∂</span> Carregar V√≠deo Demo
                </button>
                <button class="btn-info" id="btn-info" onclick="alert('Bem-vindo ao Player! Melhor experi√™ncia de streaming com todos os recursos.')">
                    <span>‚Ñπ</span> Sobre o Player
                </button>
            </div>
            <p class="hero-description" id="hero-description">
                Player de v√≠deo profissional com todos os recursos modernos. Suporte a m√∫ltiplos formatos, 
                legendas, √°udio dual, qualidade HD, Picture-in-Picture, Chromecast e muito mais. 
                A melhor experi√™ncia de streaming que voc√™ pode ter.
            </p>
        </div>
    </section>

    <!-- Content -->
    <div class="content">
        <!-- Installation Status -->
        <div class="installation-status">
            <div class="status-title">üîß Instala√ß√£o Clappr + Plugins</div>
            <div class="plugin-list" id="plugin-list">
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr (core)</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-stats</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-playback-rate-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-level-selector-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-pip-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-chromecast-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-ads-plugin (VAST/IMA)</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-thumbnail-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-dash-shaka-playback</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-hlsjs-playback</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-youtube-playback</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-ga-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-watermark-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-poster-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-quality-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-volume-fade-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-cc-button-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-seekbar-marker-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-media-control-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-analytics-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-error-screen-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-persistent-playback-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-multi-audio-plugin</span>
                </div>
                <div class="plugin-item">
                    <div class="plugin-status loading"></div>
                    <span>clappr-live-dvr-plugin</span>
                </div>
            </div>
        </div>

        <!-- Player Container -->
        <div class="player-container">
            <div class="player-wrapper">
                <div id="player"></div>
            </div>
        </div>

        <!-- Video Info -->
        <div class="video-info">
            <h1 class="video-title">üé¨ Demonstra√ß√£o Clappr Player</h1>
            <div class="video-meta">
                <span>‚ö° Player HTML5 Moderno</span>
                <span>üîß Todos os Plugins Instalados</span>
                <span>üì± Responsivo</span>
                <span>üåê Multi-formato</span>
            </div>
            <p class="video-description">
                Player de v√≠deo profissional baseado em Clappr com todos os plugins essenciais para streaming moderno. 
                Suporta HLS, DASH, YouTube, Chromecast, Picture-in-Picture, controles avan√ßados, analytics, 
                legendas, qualidade autom√°tica, an√∫ncios VAST/IMA e muito mais.
            </p>
        </div>

        <!-- Content Info -->
        <div class="content-info" id="content-info">
            <h2>Carregando conte√∫do...</h2>
            <p>Por favor, aguarde...</p>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button class="btn btn-primary" onclick="loadSampleVideo()">
                <span>‚ñ∂</span>
                Carregar V√≠deo Demo
            </button>
            <button class="btn btn-secondary" onclick="toggleFullscreen()">
                <span>‚õ∂</span>
                Tela Cheia
            </button>
            <button class="btn btn-secondary" onclick="showPlayerInfo()">
                <span>‚Ñπ</span>
                Informa√ß√µes
            </button>
            <button class="btn btn-secondary" onclick="showSettings()">
                <span>‚öôÔ∏è</span>
                Configura√ß√µes
            </button>
        </div>

        <!-- Settings Panel -->
        <div class="settings-panel" id="settings-panel" style="display: none;">
            <h3>‚öôÔ∏è Configura√ß√µes do Player</h3>
            <div class="setting-group">
                <label>Qualidade:</label>
                <select id="quality-select" onchange="changeQuality()">
                    <option value="auto">Autom√°tica</option>
                    <option value="1080p">1080p HD</option>
                    <option value="720p">720p</option>
                    <option value="480p">480p</option>
                    <option value="360p">360p</option>
                </select>
            </div>
            <div class="setting-group">
                <label>Velocidade:</label>
                <select id="speed-select" onchange="changeSpeed()">
                    <option value="0.5">0.5x</option>
                    <option value="1" selected>1x</option>
                    <option value="1.25">1.25x</option>
                    <option value="1.5">1.5x</option>
                    <option value="2">2x</option>
                </select>
            </div>
            <div class="setting-group">
                <label>Volume:</label>
                <input type="range" id="volume-slider" min="0" max="100" value="50" onchange="changeVolume()">
                <span id="volume-value">50%</span>
            </div>
            <div class="setting-group">
                <label>
                    <input type="checkbox" id="autoplay-toggle" onchange="toggleAutoplay()">
                    Reprodu√ß√£o autom√°tica
                </label>
            </div>
            <div class="setting-group">
                <label>
                    <input type="checkbox" id="subtitle-toggle" onchange="toggleSubtitles()">
                    Legendas
                </label>
            </div>
            <button class="btn btn-secondary" onclick="hideSettings()">
                <span>‚úñ</span>
                Fechar
            </button>
        </div>
    </div>

    <!-- Clappr Core -->
    <script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
    
    <!-- Clappr Plugins -->
    <script src="https://cdn.jsdelivr.net/npm/clappr-stats@latest/dist/clappr-stats.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-playback-rate-plugin@latest/dist/clappr-playback-rate-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-level-selector-plugin@latest/dist/clappr-level-selector-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-pip-plugin@latest/dist/clappr-pip-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-chromecast-plugin@latest/dist/clappr-chromecast-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-ads-plugin@latest/dist/clappr-ads-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-thumbnail-plugin@latest/dist/clappr-thumbnail-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-dash-shaka-playback@latest/dist/clappr-dash-shaka-playback.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-hlsjs-playback@latest/dist/clappr-hlsjs-playback.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-youtube-playback@latest/dist/clappr-youtube-playback.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-ga-plugin@latest/dist/clappr-ga-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-watermark-plugin@latest/dist/clappr-watermark-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-poster-plugin@latest/dist/clappr-poster-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-quality-plugin@latest/dist/clappr-quality-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-volume-fade-plugin@latest/dist/clappr-volume-fade-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-cc-button-plugin@latest/dist/clappr-cc-button-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-seekbar-marker-plugin@latest/dist/clappr-seekbar-marker-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-media-control-plugin@latest/dist/clappr-media-control-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-analytics-plugin@latest/dist/clappr-analytics-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-error-screen-plugin@latest/dist/clappr-error-screen-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-persistent-playback-plugin@latest/dist/clappr-persistent-playback-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-multi-audio-plugin@latest/dist/clappr-multi-audio-plugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-live-dvr-plugin@latest/dist/clappr-live-dvr-plugin.min.js"></script>

    <!-- Google IMA SDK for Ads -->
    <script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>

    <script>
        let player = null;
        let installationComplete = false;

        // Verificar instala√ß√£o dos plugins
        function checkPluginInstallation() {
            const plugins = [
                'ClapprStats',
                'PlaybackRatePlugin', 
                'LevelSelectorPlugin',
                'PipPlugin',
                'ChromecastPlugin',
                'AdsPlugin',
                'ThumbnailPlugin',
                'DashShakaPlayback',
                'HlsjsPlayback',
                'YoutubePlayback',
                'GoogleAnalyticsPlugin',
                'WatermarkPlugin',
                'PosterPlugin',
                'QualityPlugin',
                'VolumeFadePlugin',
                'CCButtonPlugin',
                'SeekbarMarkerPlugin',
                'MediaControlPlugin',
                'AnalyticsPlugin',
                'ErrorScreenPlugin',
                'PersistentPlaybackPlugin',
                'MultiAudioPlugin',
                'LiveDvrPlugin'
            ];

            const pluginItems = document.querySelectorAll('.plugin-item');
            
            plugins.forEach((plugin, index) => {
                setTimeout(() => {
                    if (window[plugin]) {
                        pluginItems[index].querySelector('.plugin-status').classList.remove('loading');
                        pluginItems[index].querySelector('.plugin-status').style.background = '#46d369';
                        console.log(`‚úÖ ${plugin} instalado com sucesso`);
                    } else {
                        pluginItems[index].querySelector('.plugin-status').classList.remove('loading');
                        pluginItems[index].querySelector('.plugin-status').style.background = '#e50914';
                        console.log(`‚ùå ${plugin} n√£o encontrado`);
                    }
                    
                    if (index === plugins.length - 1) {
                        installationComplete = true;
                        initializePlayer();
                    }
                }, 500 * (index + 1)); // Simular instala√ß√£o progressiva
            });
        }

        // Inicializar player com todos os plugins
        function initializePlayer() {
            if (!installationComplete) return;

            console.log('üöÄ Inicializando Clappr Player com legendas e dual √°udio...');

            player = new Clappr.Player({
                parentId: '#player',
                source: '', // Sem fonte inicial
                width: '100%',
                height: '100%',
                autoPlay: false,
                preload: 'metadata',
                
                // Plugins configurados
                plugins: [
                    ClapprStats,
                    PlaybackRatePlugin,
                    LevelSelectorPlugin,
                    PipPlugin,
                    ChromecastPlugin,
                    AdsPlugin,
                    ThumbnailPlugin,
                    DashShakaPlayback,
                    HlsjsPlayback,
                    YoutubePlayback,
                    GoogleAnalyticsPlugin,
                    WatermarkPlugin,
                    PosterPlugin,
                    QualityPlugin,
                    VolumeFadePlugin,
                    CCButtonPlugin,
                    SeekbarMarkerPlugin,
                    MediaControlPlugin,
                    AnalyticsPlugin,
                    ErrorScreenPlugin,
                    PersistentPlaybackPlugin,
                    MultiAudioPlugin,
                    LiveDvrPlugin
                ],

                // Configura√ß√µes de legendas
                ccButtonConfig: {
                    title: 'Legendas',
                    languages: [
                        { code: 'pt-BR', name: 'Portugu√™s (Brasil)', flag: 'üáßüá∑' },
                        { code: 'pt-PT', name: 'Portugu√™s (Portugal)', flag: 'üáµüáπ' },
                        { code: 'en', name: 'English', flag: 'üá∫üá∏' },
                        { code: 'es', name: 'Espa√±ol', flag: 'üá™üá∏' },
                        { code: 'fr', name: 'Fran√ßais', flag: 'üá´üá∑' },
                        { code: 'de', name: 'Deutsch', flag: 'üá©üá™' },
                        { code: 'it', name: 'Italiano', flag: 'üáÆüáπ' },
                        { code: 'ja', name: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ' },
                        { code: 'ko', name: 'ÌïúÍµ≠Ïñ¥', flag: 'üá∞üá∑' },
                        { code: 'zh', name: '‰∏≠Êñá', flag: 'üá®üá≥' },
                        { code: 'ar', name: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', flag: 'üá∏üá¶' },
                        { code: 'ru', name: '–†—É—Å—Å–∫–∏–π', flag: 'üá∑üá∫' }
                    ],
                    defaultLanguage: 'pt-BR',
                    style: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        color: '#ffffff',
                        fontSize: '16px',
                        fontFamily: 'Arial, sans-serif',
                        edgeStyle: 'raised',
                        fontVariant: 'normal'
                    },
                    position: 'bottom',
                    enablePreview: true
                },

                // Configura√ß√µes de dual √°udio
                multiAudioConfig: {
                    title: '√Åudio',
                    defaultLanguage: 'pt-BR',
                    availableLanguages: [
                        { code: 'pt-BR', name: 'Portugu√™s (Brasil)', flag: 'üáßüá∑' },
                        { code: 'pt-PT', name: 'Portugu√™s (Portugal)', flag: 'üáµüáπ' },
                        { code: 'en', name: 'English', flag: 'üá∫üá∏' },
                        { code: 'es', name: 'Espa√±ol', flag: 'üá™üá∏' },
                        { code: 'fr', name: 'Fran√ßais', flag: 'üá´üá∑' },
                        { code: 'de', name: 'Deutsch', flag: 'üá©üá™' },
                        { code: 'ja', name: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ' }
                    ],
                    enableAudioDescription: true,
                    enableCommentary: true,
                    showLanguageFlag: true,
                    autoDetectLanguage: true
                },

                // Configura√ß√µes dos plugins
                playbackRatePluginConfig: {
                    playbackRates: [0.25, 0.5, 0.75, 1, 1.25, 1.5, 2],
                    defaultRate: 1
                },

                levelSelectorConfig: {
                    title: 'Qualidade',
                    labels: {
                        'auto': 'Autom√°tico',
                        '1080p': 'Full HD',
                        '720p': 'HD',
                        '480p': 'SD',
                        '360p': 'Baixo'
                    }
                },

                chromecastConfig: {
                    appId: 'DEFAULT',
                    media: {
                        title: 'WebTV Streaming',
                        subtitle: 'Transmiss√£o ao vivo e VOD com Legendas e Dual √Åudio'
                    }
                },

                adsPluginConfig: {
                    ads: [
                        {
                            tag: 'https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dlinear&correlator=',
                            type: 'vast',
                    position: 'pre-roll'
                        }
                    ],
                    vpaidMode: 'enabled',
                    maxAllowedVpaidAdStartups: 5,
                    vpaidTimeout: 5000
                },

                watermarkConfig: {
                    position: 'bottom-right',
                    watermark: 'üî• WebTV',
                    opacity: 0.7,
                    width: 120,
                    height: 30
                },

                gaPluginConfig: {
                    trackingId: 'GA_MEASUREMENT_ID',
                    events: {
                        'play': 'video_play',
                        'pause': 'video_pause',
                        'ended': 'video_ended',
                        'error': 'video_error',
                        'subtitle_change': 'subtitle_change',
                        'audio_change': 'audio_change'
                    }
                },

                posterConfig: {
                    poster: 'https://via.placeholder.com/1920x1080/141414/ffffff?text=WebTV+Player+Legendas+Dual+Audio'
                },

                seekbarMarkerConfig: {
                    markers: [
                        { time: 30, title: 'üé¨ In√≠cio da Cena', subtitle: 'Portugu√™s' },
                        { time: 120, title: 'üé≠ Cl√≠max', subtitle: 'Ingl√™s' },
                        { time: 300, title: 'üèÅ Final', subtitle: 'Espanhol' }
                    ]
                },

                // Configura√ß√µes de recursos avan√ßados custom
                advancedConfig: {
                    continueWatching: {
                        enabled: true,
                        autoSaveProgress: true,
                        resumeThreshold: 0.9, // 90% do v√≠deo
                        showResumeButton: true,
                        crossDeviceSync: true
                    },
                    autoplayNext: {
                        enabled: true,
                        delay: 3000,
                        showCountdown: true,
                        skipIntro: true,
                        introDetection: {
                            enabled: true,
                            aiDetection: false,
                            blacklistPatterns: ['intro', 'opening', 'credits'],
                            autoSkip: false
                        }
                    },
                    skipIntro: {
                        enabled: true,
                        buttonStyle: 'modern',
                        position: 'bottom-right',
                        autoHide: true,
                        duration: 10 // segundos
                    },
                    parentalControl: {
                        enabled: true,
                        pinRequired: false,
                        pinHash: 'hashed_pin_here',
                        ageRestrictions: {
                            'L': { maxAge: 10, blocked: false },
                            '10': { maxAge: 14, blocked: false },
                            '12': { maxAge: 16, blocked: false },
                            '14': { maxAge: 18, blocked: true },
                            '16': { maxAge: 21, blocked: true },
                            '18': { maxAge: 999, blocked: true }
                        },
                        timeRestrictions: {
                            enabled: false,
                            startHour: 22,
                            endHour: 6
                        }
                    },
                    userProfile: {
                        enabled: true,
                        maxProfiles: 5,
                        currentProfile: 'default',
                        profiles: [],
                        avatarUpload: true,
                        settingsPerProfile: true,
                        autoSwitch: false
                    },
                    dynamicWatermark: {
                        enabled: true,
                        userId: 'user_id',
                        position: 'bottom-right',
                        opacity: 0.7,
                        size: 'medium',
                        animated: true,
                        showTimestamp: true,
                        customText: 'üî• WebTV'
                    },
                    antiScreenRecording: {
                        enabled: true,
                        detectionMethods: ['devtools', 'screenshot', 'recording'],
                        blockRightClick: true,
                        blockKeyboardShortcuts: true,
                        watermarkProtection: true,
                        alertOnDetection: true
                    },
                    multiScreen: {
                        enabled: true,
                        maxScreens: 4,
                        syncPlayback: true,
                        syncSettings: true,
                        screenLayout: 'grid', // grid, stack, picture-in-picture
                        dragAndDrop: true
                    },
                    playbackHistory: {
                        enabled: true,
                        maxEntries: 100,
                        autoSave: true,
                        syncAcrossDevices: true,
                        privacyMode: 'incognito', // normal, incognito, private
                        exportFormat: 'json'
                    },
                    smartCache: {
                        enabled: true,
                        nextEpisodeCache: true,
                        preloadNext: true,
                        cacheSize: '200MB',
                        intelligentPreload: true,
                        networkAware: true
                    },
                    cinemaMode: {
                        enabled: true,
                        ambientLighting: false,
                        theaterMode: true,
                        hideControls: true,
                        autoFullscreen: true,
                        disableNotifications: true
                    },
                    intelligentPreload: {
                        enabled: true,
                        bandwidthBased: true,
                        userBehaviorBased: true,
                        predictivePreload: true,
                        maxPreloadItems: 3,
                        qualityAdaptive: true
                    },
                    introDetection: {
                        enabled: true,
                        aiEnabled: false,
                        machineLearning: false,
                        patternMatching: true,
                        audioAnalysis: true,
                        visualAnalysis: true,
                        skipThreshold: 0.8
                    },
                    recommendations: {
                        enabled: true,
                        behaviorBased: true,
                        collaborativeFiltering: true,
                        contentBased: true,
                        hybridApproach: true,
                        maxRecommendations: 20,
                        refreshInterval: 300000 // 5 minutos
                    },
                    liveChat: {
                        enabled: true,
                        position: 'right',
                        width: 300,
                        height: 400,
                        autoHide: false,
                        emojiSupport: true,
                        moderation: true,
                        userBadges: true
                    },
                    ratingSystem: {
                        enabled: true,
                        types: ['likes', 'stars', 'thumbs'],
                        savePerUser: true,
                        averageRating: true,
                        showDistribution: true,
                        allowAnonymous: false
                    },
                    progressSync: {
                        enabled: true,
                        realTimeSync: true,
                        conflictResolution: 'latest', // latest, average, user_choice
                        syncInterval: 1000,
                        cloudStorage: true
                    },
                    favoritesSystem: {
                        enabled: true,
                        syncAcrossDevices: true,
                        categories: true,
                        sharePlaylists: true,
                        importExport: true,
                        maxFavorites: 500
                    },
                    encryptedOfflineDownload: {
                        enabled: true,
                        encryption: 'AES-256',
                        passwordProtection: true,
                        expireAfterDays: 30,
                        qualityOptions: ['720p', '1080p'],
                        maxDownloads: 10
                    },
                    geoBlocking: {
                        enabled: false,
                        countries: [],
                        ipWhitelist: [],
                        vpnDetection: true,
                        customMessage: 'Conte√∫do n√£o dispon√≠vel em sua regi√£o'
                    },
                    floatingPlayer: {
                        enabled: true,
                        position: 'bottom-right',
                        size: 'small',
                        autoMinimize: true,
                        dragEnabled: true,
                        stayOnTop: true,
                        hideOnScroll: true
                    },
                    customInterface: {
                        enabled: false,
                        cssFramework: 'custom',
                        webglEffects: false,
                        animatedTransitions: true,
                        themeSystem: true,
                        layoutEngine: 'flexbox'
                    },
                    animatedPreview: {
                        enabled: true,
                        hoverPreview: true,
                        seekPreview: true,
                        thumbnailStrip: true,
                        smoothTransitions: true,
                        previewDuration: 3
                    },
                    networkDetection: {
                        enabled: true,
                        speedTest: true,
                        qualityAdaptation: true,
                        connectionMonitoring: true,
                        intelligentAlerts: true,
                        offlineDetection: true
                    },
                    serverFallback: {
                        enabled: true,
                        primaryServer: 'https://api.primary.com',
                        fallbackServers: [
                            'https://api.backup1.com',
                            'https://api.backup2.com',
                            'https://api.backup3.com'
                        ],
                        healthCheck: true,
                        autoSwitch: true,
                        failoverTimeout: 5000
                    }
                },

                // Configura√ß√µes de playback com legendas
                hlsjsConfig: {
                    enableWorker: true,
                    lowLatencyMode: true,
                    backBufferLength: 90,
                    // Configura√ß√µes de legendas HLS
                    enableCEA708Captions: true,
                    captionsTextTrack1Label: 'Portugu√™s',
                    captionsTextTrack2Label: 'Ingl√™s',
                    captionsTextTrack3Label: 'Espanhol'
                },

                shakaConfig: {
                    streaming: {
                        lowLatencyMode: true,
                        abr: {
                            enabled: true,
                            defaultBandwidthEstimate: 1000000
                        }
                    },
                    // Configura√ß√µes de legendas DASH
                    textDisplayFactory: new shaka.text.SimpleTextDisplayer(),
                    preferredAudioLanguage: 'pt-BR',
                    preferredTextLanguage: 'pt-BR'
                }
            });

            // Event listeners para legendas e √°udio
            setupSubtitleAndAudioEvents();

            console.log('‚úÖ Clappr Player inicializado com legendas e dual √°udio!');
        }

        // Configurar eventos de legendas e √°udio
        function setupSubtitleAndAudioEvents() {
            if (!player) return;

            // Eventos de legendas
            player.on(Clappr.Events.PLAYER_SUBTITLE_CHANGED, (language) => {
                console.log(`üìù Legenda alterada para: ${language}`);
                updateSubtitleInfo(language);
            });

            player.on(Clappr.Events.PLAYER_SUBTITLE_ENABLED, () => {
                console.log('‚úÖ Legendas ativadas');
                showNotification('Legendas ativadas', 'success');
            });

            player.on(Clappr.Events.PLAYER_SUBTITLE_DISABLED, () => {
                console.log('‚ùå Legendas desativadas');
                showNotification('Legendas desativadas', 'info');
            });

            // Eventos de √°udio
            player.on(Clappr.Events.PLAYER_AUDIO_CHANGED, (audioTrack) => {
                console.log(`üîä √Åudio alterado para: ${audioTrack.language}`);
                updateAudioInfo(audioTrack);
            });

            player.on(Clappr.Events.PLAYER_AUDIO_TRACKS_AVAILABLE, (tracks) => {
                console.log('üéµ Trilhas de √°udio dispon√≠veis:', tracks);
                displayAudioTracks(tracks);
            });

            // Eventos de texto
            player.on(Clappr.Events.PLAYER_TEXT_TRACKS_AVAILABLE, (tracks) => {
                console.log('üìù Trilhas de texto dispon√≠veis:', tracks);
                displaySubtitleTracks(tracks);
            });
        }

        // Atualizar informa√ß√µes de legenda
        function updateSubtitleInfo(language) {
            const langInfo = getLanguageInfo(language);
            const subtitleDisplay = document.getElementById('current-subtitle') || createSubtitleDisplay();
            subtitleDisplay.innerHTML = `üìù ${langInfo.flag} ${langInfo.name}`;
            subtitleDisplay.style.display = 'block';
        }

        // Atualizar informa√ß√µes de √°udio
        function updateAudioInfo(audioTrack) {
            const langInfo = getLanguageInfo(audioTrack.language);
            const audioDisplay = document.getElementById('current-audio') || createAudioDisplay();
            audioDisplay.innerHTML = `üîä ${langInfo.flag} ${langInfo.name}`;
            audioDisplay.style.display = 'block';
        }

        // Obter informa√ß√µes do idioma
        function getLanguageInfo(code) {
            const languages = {
                'pt-BR': { name: 'Portugu√™s (Brasil)', flag: 'üáßüá∑' },
                'pt-PT': { name: 'Portugu√™s (Portugal)', flag: 'üáµüáπ' },
                'en': { name: 'English', flag: 'üá∫üá∏' },
                'es': { name: 'Espa√±ol', flag: 'üá™üá∏' },
                'fr': { name: 'Fran√ßais', flag: 'üá´üá∑' },
                'de': { name: 'Deutsch', flag: 'üá©üá™' },
                'it': { name: 'Italiano', flag: 'üáÆüáπ' },
                'ja': { name: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ' },
                'ko': { name: 'ÌïúÍµ≠Ïñ¥', flag: 'üá∞üá∑' },
                'zh': { name: '‰∏≠Êñá', flag: 'üá®üá≥' },
                'ar': { name: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', flag: 'üá∏üá¶' },
                'ru': { name: '–†—É—Å—Å–∫–∏–π', flag: 'üá∑üá∫' }
            };
            return languages[code] || { name: code, flag: 'üåê' };
        }

        // Criar display de legenda
        function createSubtitleDisplay() {
            const display = document.createElement('div');
            display.id = 'current-subtitle';
            display.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 8px 12px;
                border-radius: 6px;
                font-size: 12px;
                z-index: 1000;
                display: none;
                transition: all 0.3s ease;
            `;
            document.body.appendChild(display);
            return display;
        }

        // Criar display de √°udio
        function createAudioDisplay() {
            const display = document.createElement('div');
            display.id = 'current-audio';
            display.style.cssText = `
                position: fixed;
                top: 140px;
                right: 20px;
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 8px 12px;
                border-radius: 6px;
                font-size: 12px;
                z-index: 1000;
                display: none;
                transition: all 0.3s ease;
            `;
            document.body.appendChild(display);
            return display;
        }

        // Mostrar notifica√ß√£o
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#46d369' : type === 'error' ? '#e50914' : '#0071eb'};
                color: white;
                padding: 12px 20px;
                border-radius: 6px;
                font-size: 14px;
                z-index: 1001;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Sistema de recursos avan√ßados custom
        let continueWatchingData = {};
        let userProfileData = {};
        let playbackHistory = [];
        let favoritesData = [];
        let floatingPlayerInstance = null;
        let ratingData = {};
        let networkStatus = {};
        let serverHealth = {};

        function initAdvancedFeatures() {
            if (!player) return;

            // Inicializar cada sistema avan√ßado
            initContinueWatching();
            initAutoplayNext();
            initSkipIntro();
            initParentalControl();
            initUserProfile();
            initDynamicWatermark();
            initAntiScreenRecording();
            initMultiScreen();
            initPlaybackHistory();
            initSmartCache();
            initCinemaMode();
            initIntelligentPreload();
            initIntroDetection();
            initRecommendations();
            initLiveChat();
            initRatingSystem();
            initProgressSync();
            initFavoritesSystem();
            initEncryptedOfflineDownload();
            initGeoBlocking();
            initFloatingPlayer();
            initCustomInterface();
            initAnimatedPreview();
            initNetworkDetection();
            initServerFallback();

            // Adicionar controles avan√ßados
            addAdvancedControls();
        }

        // Sistema "Continuar Assistindo"
        function initContinueWatching() {
            if (!player.getConfig().advancedConfig?.continueWatching?.enabled) return;

            // Carregar progresso salvo
            const savedProgress = localStorage.getItem('continueWatching');
            if (savedProgress) {
                continueWatchingData = JSON.parse(savedProgress);
                
                // Mostrar bot√£o de continuar
                if (continueWatchingData.progress > 0.9) {
                    showContinueWatchingButton();
                }
            }

            // Salvar progresso automaticamente
            if (player) {
                setInterval(() => {
                    if (player.isPlaying()) {
                        saveProgress();
                    }
                }, 5000);
            }
        }

        function saveProgress() {
            if (!player) return;
            
            const progress = {
                videoId: player.getCurrentSrc(),
                currentTime: player.getCurrentTime(),
                duration: player.getDuration(),
                progress: player.getCurrentTime() / player.getDuration(),
                timestamp: Date.now(),
                userId: userProfileData.id || 'anonymous'
            };

            localStorage.setItem('continueWatching', JSON.stringify(progress));
        }

        function showContinueWatchingButton() {
            const controls = document.querySelector('.controls');
            if (!controls) return;

            const continueButton = document.createElement('button');
            continueButton.className = 'btn btn-primary';
            continueButton.innerHTML = `<span>‚èÆÔ∏è</span> Continuar Assistindo (${Math.round(continueWatchingData.progress * 100)}%)`;
            continueButton.onclick = continueFromLastPosition;
            
            controls.appendChild(continueButton);
        }

        function continueFromLastPosition() {
            if (!player || !continueWatchingData.videoId) return;
            
            player.load(continueWatchingData.videoId);
            player.seek(continueWatchingData.currentTime);
            showNotification('‚èÆÔ∏è Continuando de onde parou', 'success');
        }

        // Autoplay pr√≥ximo epis√≥dio
        function initAutoplayNext() {
            if (!player.getConfig().advancedConfig?.autoplayNext?.enabled) return;

            player.on(Clappr.Events.PLAYER_ENDED, () => {
                if (player.getConfig().advancedConfig?.autoplayNext?.skipIntro) {
                    detectAndSkipIntro();
                }
                
                setTimeout(() => {
                    playNextEpisode();
                }, player.getConfig().advancedConfig?.autoplayNext?.delay || 3000);
            });
        }

        function playNextEpisode() {
            // Simular pr√≥ximo epis√≥dio
            const nextEpisodeUrl = getNextEpisodeUrl();
            if (nextEpisodeUrl) {
                player.load(nextEpisodeUrl);
                showNotification('‚è≠Ô∏è Pr√≥ximo epis√≥dio iniciado', 'success');
            }
        }

        function getNextEpisodeUrl() {
            // L√≥gica para encontrar pr√≥ximo epis√≥dio
            const currentUrl = player.getCurrentSrc();
            const episodeNumber = extractEpisodeNumber(currentUrl);
            
            if (episodeNumber) {
                return currentUrl.replace(/episodio-\d+/, `episodio-${episodeNumber + 1}`);
            }
            
            return null;
        }

        function extractEpisodeNumber(url) {
            const match = url.match(/episodio-(\d+)/);
            return match ? parseInt(match[1]) : null;
        }

        // Bot√£o "Pular Intro"
        function initSkipIntro() {
            if (!player.getConfig().advancedConfig?.skipIntro?.enabled) return;

            addSkipIntroButton();
        }

        function addSkipIntroButton() {
            const playerContainer = document.querySelector('.player-container');
            if (!playerContainer) return;

            const skipButton = document.createElement('button');
            skipButton.id = 'skip-intro-btn';
            skipButton.style.cssText = `
                position: absolute;
                bottom: 80px;
                right: 20px;
                background: rgba(0, 0, 0, 0.8);
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 25px;
                cursor: pointer;
                font-size: 14px;
                z-index: 1000;
                transition: all 0.3s;
                display: none;
            `;
            
            skipButton.innerHTML = '‚è≠Ô∏è Pular Intro';
            skipButton.onclick = skipIntro;
            
            playerContainer.appendChild(skipButton);
        }

        function skipIntro() {
            const duration = player.getDuration();
            const skipTime = duration * 0.1; // Pular 10% do v√≠deo
            
            player.seek(skipTime);
            showNotification('‚è≠Ô∏è Intro pulada', 'success');
        }

        function showSkipIntroButton() {
            const button = document.getElementById('skip-intro-btn');
            if (button) {
                button.style.display = 'block';
                
                // Auto esconder ap√≥s 10 segundos
                setTimeout(() => {
                    button.style.display = 'none';
                }, 10000);
            }
        }

        // Sistema de controle parental
        function initParentalControl() {
            if (!player.getConfig().advancedConfig?.parentalControl?.enabled) return;

            // Verificar PIN
            const pinRequired = player.getConfig().advancedConfig?.parentalControl?.pinRequired;
            if (pinRequired) {
                requestParentalPin();
            }

            // Verificar restri√ß√µes de idade
            checkAgeRestrictions();
        }

        function requestParentalPin() {
            const pin = prompt('üîí Digite o PIN parental:');
            const storedHash = player.getConfig().advancedConfig?.parentalControl?.pinHash;
            
            if (hashPin(pin) === storedHash) {
                showNotification('‚úÖ PIN correto', 'success');
            } else {
                showNotification('‚ùå PIN incorreto', 'error');
                player.pause();
            }
        }

        function hashPin(pin) {
            // Simples hash para demonstra√ß√£o
            return btoa(pin).split('').reverse().join('');
        }

        function checkAgeRestrictions() {
            const userAge = getUserAge();
            const restrictions = player.getConfig().advancedConfig?.parentalControl?.ageRestrictions;
            
            if (restrictions && restrictions[userProfileData.ageRating]) {
                const restriction = restrictions[userProfileData.ageRating];
                if (restriction.blocked) {
                    showNotification('üö´ Conte√∫do bloqueado para sua idade', 'error');
                    player.pause();
                }
            }
        }

        function getUserAge() {
            // Simular idade do usu√°rio
            return userProfileData.age || 18;
        }

        // Multi-perfil de usu√°rio
        function initUserProfile() {
            if (!player.getConfig().advancedConfig?.userProfile?.enabled) return;

            loadUserProfiles();
            addProfileSelector();
        }

        function loadUserProfiles() {
            const saved = localStorage.getItem('userProfiles');
            if (saved) {
                userProfileData = JSON.parse(saved);
            } else {
                // Criar perfil padr√£o
                userProfileData = {
                    id: 'default',
                    name: 'Usu√°rio Padr√£o',
                    avatar: 'üë§',
                    age: 18,
                    settings: {},
                    preferences: {}
                };
            }
        }

        function addProfileSelector() {
            const controls = document.querySelector('.controls');
            if (!controls) return;

            const profileSelector = document.createElement('select');
            profileSelector.style.cssText = `
                background: rgba(0, 0, 0, 0.8);
                color: white;
                border: none;
                padding: 8px 12px;
                border-radius: 4px;
                margin-left: 10px;
                cursor: pointer;
            `;
            
            profileSelector.onchange = switchUserProfile;
            
            controls.appendChild(profileSelector);
        }

        function switchUserProfile(event) {
            const profileId = event.target.value;
            // L√≥gica para mudar de perfil
            showNotification(`üë§ Perfil alterado para: ${profileId}`, 'success');
        }

        // Marca d'√°gua din√¢mica
        function initDynamicWatermark() {
            if (!player.getConfig().advancedConfig?.dynamicWatermark?.enabled) return;

            addDynamicWatermark();
        }

        function addDynamicWatermark() {
            const playerContainer = document.querySelector('.player-container');
            if (!playerContainer) return;

            const watermark = document.createElement('div');
            watermark.id = 'dynamic-watermark';
            watermark.style.cssText = `
                position: absolute;
                bottom: 20px;
                right: 20px;
                background: rgba(0, 0, 0, 0.7);
                color: white;
                padding: 8px 12px;
                border-radius: 4px;
                font-size: 12px;
                z-index: 1000;
                pointer-events: none;
                opacity: ${player.getConfig().advancedConfig?.dynamicWatermark?.opacity || 0.7};
            `;
            
            const userId = player.getConfig().advancedConfig?.dynamicWatermark?.userId || 'user_id';
            const customText = player.getConfig().advancedConfig?.dynamicWatermark?.customText || 'üî• WebTV';
            const timestamp = player.getConfig().advancedConfig?.dynamicWatermark?.showTimestamp ? new Date().toLocaleTimeString() : '';
            
            watermark.innerHTML = `${customText} | ${userId} | ${timestamp}`;
            
            playerContainer.appendChild(watermark);
        }

        // Sistema anti-screen recording
        function initAntiScreenRecording() {
            if (!player.getConfig().advancedConfig?.antiScreenRecording?.enabled) return;

            // Bloquear right-click
            if (player.getConfig().advancedConfig?.antiScreenRecording?.blockRightClick) {
                document.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    showNotification('üö´ Screenshot desativado', 'error');
                });
            }

            // Detectar devtools
            if (player.getConfig().advancedConfig?.antiScreenRecording?.detectionMethods?.includes('devtools')) {
                detectDevTools();
            }

            // Adicionar watermark de prote√ß√£o
            if (player.getConfig().advancedConfig?.antiScreenRecording?.watermarkProtection) {
                addProtectionWatermark();
            }
        }

        function detectDevTools() {
            const devtools = {
                open: false,
                orientation: null
            };

            setInterval(() => {
                if (window.outerHeight - window.innerHeight > 200 || window.outerWidth - window.innerWidth > 200) {
                    if (!devtools.open) {
                        devtools.open = true;
                        if (player.getConfig().advancedConfig?.antiScreenRecording?.alertOnDetection) {
                            showNotification('üö´ DevTools detectado', 'error');
                        }
                    }
                } else {
                    devtools.open = false;
                }
            }, 500);
        }

        function addProtectionWatermark() {
            const protectionWatermark = document.createElement('div');
            protectionWatermark.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 100px;
                color: rgba(255, 0, 0, 0.1);
                pointer-events: none;
                z-index: 9999;
                user-select: none;
            `;
            
            protectionWatermark.textContent = 'üö´ PROTEGIDO';
            document.body.appendChild(protectionWatermark);
        }

        // Controle simult√¢neo de telas
        function initMultiScreen() {
            if (!player.getConfig().advancedConfig?.multiScreen?.enabled) return;

            // Implementar l√≥gica para m√∫ltiplas telas
            setupScreenSync();
        }

        function setupScreenSync() {
            // Simular sincroniza√ß√£o entre telas
            const syncData = {
                action: 'sync',
                timestamp: Date.now(),
                currentTime: player.getCurrentTime(),
                isPlaying: player.isPlaying()
            };

            // Enviar para outras telas via localStorage ou WebSocket
            localStorage.setItem('multiScreenSync', JSON.stringify(syncData));
        }

        // Hist√≥rico de reprodu√ß√£o
        function initPlaybackHistory() {
            if (!player.getConfig().advancedConfig?.playbackHistory?.enabled) return;

            loadPlaybackHistory();
            setupHistoryTracking();
        }

        function loadPlaybackHistory() {
            const saved = localStorage.getItem('playbackHistory');
            if (saved) {
                playbackHistory = JSON.parse(saved);
            }
        }

        function setupHistoryTracking() {
            player.on(Clappr.Events.PLAYER_PLAY, () => {
                addToHistory({
                    action: 'play',
                    videoId: player.getCurrentSrc(),
                    timestamp: Date.now()
                });
            });
        }

        function addToHistory(entry) {
            playbackHistory.unshift(entry);
            
            const maxEntries = player.getConfig().advancedConfig?.playbackHistory?.maxEntries || 100;
            if (playbackHistory.length > maxEntries) {
                playbackHistory = playbackHistory.slice(0, maxEntries);
            }
            
            localStorage.setItem('playbackHistory', JSON.stringify(playbackHistory));
        }

        // Cache inteligente do pr√≥ximo epis√≥dio
        function initSmartCache() {
            if (!player.getConfig().advancedConfig?.smartCache?.enabled) return;

            setupIntelligentCaching();
        }

        function setupIntelligentCaching() {
            // Pr√≥ximo epis√≥dio baseado no hist√≥rico
            const nextEpisode = predictNextEpisode();
            if (nextEpisode) {
                preloadEpisode(nextEpisode);
            }
        }

        function predictNextEpisode() {
            // L√≥gica de predi√ß√£o baseada em comportamento
            return null; // Implementar IA opcional
        }

        function preloadEpisode(url) {
            // Pr√©-carregar pr√≥ximo epis√≥dio
            const link = document.createElement('link');
            link.rel = 'preload';
            link.as = 'video';
            link.href = url;
            document.head.appendChild(link);
        }

        // Modo cinema
        function initCinemaMode() {
            if (!player.getConfig().advancedConfig?.cinemaMode?.enabled) return;

            addCinemaModeButton();
        }

        function addCinemaModeButton() {
            const controls = document.querySelector('.controls');
            if (!controls) return;

            const cinemaButton = document.createElement('button');
            cinemaButton.className = 'btn btn-secondary';
            cinemaButton.innerHTML = '<span>üé¨</span> Modo Cinema';
            cinemaButton.onclick = toggleCinemaMode;
            
            controls.appendChild(cinemaButton);
        }

        function toggleCinemaMode() {
            document.body.classList.toggle('cinema-mode');
            showNotification('üé¨ Modo cinema ' + (document.body.classList.contains('cinema-mode') ? 'ativado' : 'desativado'), 'success');
        }

        // Adicionar controles avan√ßados
        function addAdvancedControls() {
            const controls = document.querySelector('.controls');
            if (!controls) return;

            const advancedContainer = document.createElement('div');
            advancedContainer.className = 'advanced-controls';
            advancedContainer.innerHTML = `
                <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                    <button class="btn btn-secondary" onclick="showAdvancedSettings()">
                        <span>‚öôÔ∏è</span> Configura√ß√µes Avan√ßadas
                    </button>
                    <button class="btn btn-secondary" onclick="showProfiles()">
                        <span>üë§</span> Perfis
                    </button>
                    <button class="btn btn-secondary" onclick="showFavorites()">
                        <span>‚≠ê</span> Favoritos
                    </button>
                    <button class="btn btn-secondary" onclick="showHistory()">
                        <span>üìö</span> Hist√≥rico
                    </button>
                </div>
            `;
            
            controls.appendChild(advancedContainer);
        }

        function showAdvancedSettings() {
            showNotification('‚öôÔ∏è Configura√ß√µes avan√ßadas em desenvolvimento', 'info');
        }

        function showProfiles() {
            showNotification('üë§ Sistema de perfis em desenvolvimento', 'info');
        }

        function showFavorites() {
            showNotification('‚≠ê Sistema de favoritos em desenvolvimento', 'info');
        }

        function showHistory() {
            showNotification('üìö Hist√≥rico em desenvolvimento', 'info');
        }

        // Adicionar CSS para modo cinema
        const cinemaCSS = document.createElement('style');
        cinemaCSS.textContent = `
            .cinema-mode {
                background: #000 !important;
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
            }
            
            .cinema-mode .player-container {
                max-width: 90%;
                max-height: 90vh;
                box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
            }
            
            .cinema-mode .controls {
                background: rgba(0, 0, 0, 0.9);
                border-radius: 8px;
            }
        `;
        document.head.appendChild(cinemaCSS);

        // Adicionar ao evento de inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                initAdvancedFeatures();
            }, 6000);
        });
        let chromecastSession = null;
        let airplaySession = null;
        let pipWindow = null;
        let wakeLock = null;
        let mediaSession = null;
        let serviceWorkerRegistration = null;

        function initMobileFeatures() {
            if (!player) return;

            // Inicializar cada funcionalidade
            initChromecast();
            initAirPlay();
            initFullscreen();
            initPictureInPicture();
            initMediaSession();
            initWakeLock();
            initServiceWorker();
            initScreenOrientation();

            // Adicionar controles mobile
            addMobileControls();
        }

        // Chromecast SDK
        function initChromecast() {
            if (!('chrome' in window && chrome.cast) && !player.getConfig().mobileConfig?.chromecast?.enabled) {
                console.log('üì∫ Chromecast n√£o dispon√≠vel');
                return;
            }

            // Inicializar Chromecast
            const sessionRequest = new chrome.cast.SessionRequest(
                player.getConfig().mobileConfig?.chromecast?.appId || 'DEFAULT'
            );

            const apiConfig = new chrome.cast.ApiConfig(
                sessionRequest,
                sessionListener,
                receiverListener,
                chrome.cast.Status.ERROR
            );

            chrome.cast.initialize(apiConfig, onInitSuccess, onError);
        }

        function sessionListener(e) {
            chromecastSession = e.session;
            console.log('üì∫ Sess√£o Chromecast iniciada:', chromecastSession);
            
            if (chromecastSession) {
                loadMediaOnChromecast();
            }
        }

        function receiverListener(e) {
            if (e.length === 0) {
                console.log('üì∫ Nenhum Chromecast Receiver encontrado');
            } else {
                console.log('üì∫ Chromecast Receivers encontrados:', e);
            }
        }

        function onInitSuccess() {
            console.log('‚úÖ Chromecast SDK inicializado');
            showNotification('üì∫ Chromecast pronto', 'success');
        }

        function onError(error) {
            console.error('‚ùå Erro Chromecast:', error);
            showNotification('‚ùå Erro no Chromecast', 'error');
        }

        function loadMediaOnChromecast() {
            if (!chromecastSession || !player) return;

            const mediaInfo = new chrome.cast.media.MediaInfo(
                player.getCurrentSrc(),
                chrome.cast.media.GenericMediaMetadata
            );

            const request = new chrome.cast.media.LoadRequest(mediaInfo);
            chromecastSession.loadMedia(request);
            
            showNotification('üì∫ Transmitindo para Chromecast', 'success');
        }

        // AirPlay Support
        function initAirPlay() {
            if (!player.getConfig().mobileConfig?.airplay?.enabled) {
                console.log('üì± AirPlay desativado');
                return;
            }

            // Verificar suporte AirPlay
            if (!('WebKitPlaybackTargetAvailabilityEvent' in window)) {
                console.log('üì± AirPlay n√£o suportado');
                return;
            }

            // Adicionar listener para AirPlay
            video.addEventListener('webkitplaybacktargetavailabilitychanged', (event) => {
                if (event.availability === 'available') {
                    console.log('üì± AirPlay dispon√≠vel');
                    showAirPlayButton();
                }
            });
        }

        function showAirPlayButton() {
            const controls = document.querySelector('.controls');
            if (!controls) return;

            const airplayButton = document.createElement('button');
            airplayButton.className = 'btn btn-secondary';
            airplayButton.innerHTML = '<span>üì±</span> AirPlay';
            airplayButton.onclick = startAirPlay;
            
            controls.appendChild(airplayButton);
        }

        function startAirPlay() {
            const video = document.querySelector('video');
            if (!video) return;

            video.webkitShowPlaybackTargetPicker();
            showNotification('üì± Selecione o dispositivo AirPlay', 'info');
        }

        // Fullscreen API
        function initFullscreen() {
            if (!player.getConfig().mobileConfig?.fullscreen?.enabled) {
                console.log('üñ•Ô∏è Fullscreen desativado');
                return;
            }

            // Adicionar bot√£o fullscreen customizado
            addFullscreenButton();
            
            // Auto fullscreen se configurado
            if (player.getConfig().mobileConfig?.fullscreen?.autoFullscreen) {
                document.addEventListener('click', () => {
                    requestFullscreen();
                }, { once: true });
            }
        }

        function addFullscreenButton() {
            const controls = document.querySelector('.controls');
            if (!controls) return;

            const fullscreenButton = document.createElement('button');
            fullscreenButton.className = 'btn btn-secondary';
            fullscreenButton.innerHTML = '<span>‚õ∂</span> Tela Cheia';
            fullscreenButton.onclick = toggleFullscreen;
            
            controls.appendChild(fullscreenButton);
        }

        function requestFullscreen() {
            const playerContainer = document.querySelector('.player-container');
            if (playerContainer.requestFullscreen) {
                playerContainer.requestFullscreen();
            } else if (playerContainer.webkitRequestFullscreen) {
                playerContainer.webkitRequestFullscreen();
            } else if (playerContainer.msRequestFullscreen) {
                playerContainer.msRequestFullscreen();
            }
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }

        // Picture-in-Picture API
        function initPictureInPicture() {
            if (!player.getConfig().mobileConfig?.pictureInPicture?.enabled) {
                console.log('üñºÔ∏è Picture-in-Picture desativado');
                return;
            }

            // Verificar suporte PiP
            if (!('pictureInPictureEnabled' in document)) {
                console.log('üñºÔ∏è PiP n√£o suportado');
                return;
            }

            // Adicionar bot√£o PiP
            addPiPButton();
        }

        function addPiPButton() {
            const controls = document.querySelector('.controls');
            if (!controls) return;

            const pipButton = document.createElement('button');
            pipButton.className = 'btn btn-secondary';
            pipButton.innerHTML = '<span>üñºÔ∏è</span> Picture-in-Picture';
            pipButton.onclick = togglePictureInPicture;
            
            controls.appendChild(pipButton);
        }

        async function togglePictureInPicture() {
            const video = document.querySelector('video');
            if (!video) return;

            try {
                if (document.pictureInPictureElement) {
                    await document.exitPictureInPicture();
                    showNotification('üñºÔ∏è Saindo do Picture-in-Picture', 'info');
                } else {
                    await video.requestPictureInPicture();
                    showNotification('üñºÔ∏è Entrando no Picture-in-Picture', 'success');
                }
            } catch (error) {
                console.error('‚ùå Erro PiP:', error);
                
                // Fallback para fullscreen
                if (player.getConfig().mobileConfig?.pictureInPicture?.fallbackToFullscreen) {
                    toggleFullscreen();
                }
            }
        }

        // Media Session API
        function initMediaSession() {
            if (!('mediaSession' in navigator) || !player.getConfig().mobileConfig?.mediaSession?.enabled) {
                console.log('üéµ Media Session API n√£o dispon√≠vel');
                return;
            }

            mediaSession = navigator.mediaSession;
            
            // Configurar metadata
            if (player.getConfig().mobileConfig?.mediaSession?.metadata) {
                updateMediaSessionMetadata();
            }

            // Configurar action handlers
            if (player.getConfig().mobileConfig?.mediaSession?.actionHandlers) {
                setupMediaSessionHandlers();
            }
        }

        function updateMediaSessionMetadata() {
            if (!mediaSession || !player) return;

            mediaSession.metadata = new MediaMetadata({
                title: 'WebTV Streaming',
                artist: 'WebTV Player',
                album: 'Streaming Content',
                artwork: [
                    { src: 'https://via.placeholder.com/512x512/141414/ffffff?text=WebTV', sizes: '512x512', type: 'image/png' }
                ]
            });
        }

        function setupMediaSessionHandlers() {
            if (!mediaSession) return;

            // Play handler
            mediaSession.setActionHandler('play', () => {
                if (player) player.play();
            });

            // Pause handler
            mediaSession.setActionHandler('pause', () => {
                if (player) player.pause();
            });

            // Seek handlers
            mediaSession.setActionHandler('seekbackward', (details) => {
                if (player) {
                    const newTime = Math.max(0, player.getCurrentTime() - (details.seekOffset || 10));
                    player.seek(newTime);
                }
            });

            mediaSession.setActionHandler('seekforward', (details) => {
                if (player) {
                    const newTime = Math.min(player.getDuration(), player.getCurrentTime() + (details.seekOffset || 10));
                    player.seek(newTime);
                }
            });

            // Previous/Next handlers
            mediaSession.setActionHandler('previoustrack', () => {
                console.log('‚èÆ Previous track');
            });

            mediaSession.setActionHandler('nexttrack', () => {
                console.log('‚è≠ Next track');
            });
        }

        // Wake Lock API
        function initWakeLock() {
            if (!('wakeLock' in navigator) || !player.getConfig().mobileConfig?.wakeLock?.enabled) {
                console.log('üò¥ Wake Lock API n√£o dispon√≠vel');
                return;
            }

            // Solicitar wake lock quando o v√≠deo come√ßa
            if (player) {
                player.on(Clappr.Events.PLAYER_PLAY, requestWakeLock);
                player.on(Clappr.Events.PLAYER_PAUSE, releaseWakeLock);
            }
        }

        async function requestWakeLock() {
            try {
                wakeLock = await navigator.wakeLock.request('screen');
                console.log('üò¥ Wake lock ativado');
            } catch (error) {
                console.error('‚ùå Erro no wake lock:', error);
            }
        }

        function releaseWakeLock() {
            if (wakeLock) {
                wakeLock.release();
                wakeLock = null;
                console.log('üò¥ Wake lock liberado');
            }
        }

        // Service Worker (PWA)
        async function initServiceWorker() {
            if (!('serviceWorker' in navigator) || !player.getConfig().mobileConfig?.serviceWorker?.enabled) {
                console.log('üîß Service Worker n√£o dispon√≠vel');
                return;
            }

            try {
                serviceWorkerRegistration = await navigator.serviceWorker.register('/sw.js');
                console.log('‚úÖ Service Worker registrado');
                
                // Configurar cache para offline
                if (player.getConfig().mobileConfig?.serviceWorker?.offlineMode) {
                    setupOfflineCache();
                }
            } catch (error) {
                console.error('‚ùå Erro no Service Worker:', error);
            }
        }

        function setupOfflineCache() {
            if (!serviceWorkerRegistration) return;

            // Cache de v√≠deos para offline
            serviceWorkerRegistration.addEventListener('message', (event) => {
                if (event.data.type === 'CACHE_UPDATED') {
                    showNotification('üíæ V√≠deos cacheados para offline', 'success');
                }
            });
        }

        // Screen Orientation API
        function initScreenOrientation() {
            if (!('screen' in window && 'orientation' in window.screen)) {
                console.log('üì± Screen Orientation API dispon√≠vel');
                
                // Listener para mudan√ßa de orienta√ß√£o
                window.screen.orientation.addEventListener('change', (event) => {
                    console.log('üì± Orienta√ß√£o mudou para:', event.target.type);
                    handleOrientationChange(event.target.type);
                });
            }
        }

        function handleOrientationChange(orientation) {
            // Ajustar player baseado na orienta√ß√£o
            const playerContainer = document.querySelector('.player-container');
            if (!playerContainer) return;

            if (orientation.includes('landscape')) {
                playerContainer.style.maxWidth = '100%';
                playerContainer.style.maxHeight = '60vh';
            } else {
                playerContainer.style.maxWidth = '100vw';
                playerContainer.style.maxHeight = '40vh';
            }
        }

        // Adicionar controles mobile
        function addMobileControls() {
            const controls = document.querySelector('.controls');
            if (!controls) return;

            const mobileContainer = document.createElement('div');
            mobileContainer.className = 'mobile-controls';
            mobileContainer.style.cssText = `
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                padding: 10px;
                background: rgba(0, 0, 0, 0.8);
                border-radius: 8px;
                margin-bottom: 10px;
            `;

            // Status indicators
            const statusDiv = document.createElement('div');
            statusDiv.innerHTML = `
                <div style="color: white; font-size: 12px;">
                    üì± Mobile: ${isMobileDevice() ? 'Sim' : 'N√£o'} | 
                    üì∫ Chromecast: ${chromecastSession ? 'Conectado' : 'Aguardando'} | 
                    üñºÔ∏è PiP: ${document.pictureInPictureElement ? 'Ativo' : 'Inativo'}
                </div>
            `;

            mobileContainer.appendChild(statusDiv);
            controls.appendChild(mobileContainer);
        }

        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        // Adicionar ao evento de inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                initMobileFeatures();
            }, 5000);
        });

        // Adicionar CSS de anima√ß√µes
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            @keyframes pulse {
                0% { box-shadow: 0 0 0 0 rgba(229, 9, 20, 0.7); }
                70% { box-shadow: 0 0 0 10px rgba(229, 9, 20, 0); }
                100% { box-shadow: 0 0 0 0 rgba(229, 9, 20, 0); }
            }
            .sync-active {
                animation: pulse 2s infinite;
            }
        `;
        document.head.appendChild(style);

        // Adicionar ao evento de inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                if (localStorage.getItem('syncEnabled') === 'true') {
                    initSimultaneousStreaming();
                }
            }, 3000);
        });
        function loadSampleVideo() {
            if (!player) {
                alert('Player ainda n√£o est√° pronto. Aguarde a instala√ß√£o dos plugins.');
                return;
            }

            // V√≠deo com m√∫ltiplas trilhas de √°udio e legendas
            const sampleVideo = 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4';
            
            // Adicionar trilhas de legendas (simuladas)
            const subtitleTracks = [
                {
                    id: 'pt-br',
                    label: 'Portugu√™s (Brasil)',
                    language: 'pt-BR',
                    url: 'data:text/vtt;base64,V0VCVElUTEUKCjAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDUuMDAwCjAwOjAwOjA1LjAwMCAtLT4gMDA6MDA6MTAuMDAwCkJpZyBCdWNrIEJ1bm55IC0gRGVtb25zdHJhw6fDo28gY29tIGxlZ2VuZGFzIGUgZHVhbCDDoWRpbwo=',
                    kind: 'subtitles',
                    default: true
                },
                {
                    id: 'en',
                    label: 'English',
                    language: 'en',
                    url: 'data:text/vtt;base64,V0VCVElUTEUKCjAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDUuMDAwCjAwOjAwOjA1LjAwMCAtLT4gMDA6MDA6MTAuMDAwCkJpZyBCdWNrIEJ1bm55IC0gRGVtb25zdHJhdGlvbiB3aXRoIHN1YnRpdGxlcyBhbmQgZHVhbCBhdWRpbwo=',
                    kind: 'subtitles'
                },
                {
                    id: 'es',
                    label: 'Espa√±ol',
                    language: 'es',
                    url: 'data:text/vtt;base64,V0VCVElUTEUKCjAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDUuMDAwCjAwOjAwOjA1LjAwMCAtLT4gMDA6MDA6MTAuMDAwCkJpZyBCdWNrIEJ1bm55IC0gRGVtb25zdHJhY2nDs24gY29uIHN1YnTtdHVsb3MgZSBhdWRpbyBkdWFsCg==',
                    kind: 'subtitles'
                }
            ];

            // Adicionar trilhas de √°udio (simuladas)
            const audioTracks = [
                {
                    id: 'audio-pt',
                    label: 'Portugu√™s (Brasil)',
                    language: 'pt-BR',
                    kind: 'main',
                    default: true
                },
                {
                    id: 'audio-en',
                    label: 'English',
                    language: 'en',
                    kind: 'main'
                },
                {
                    id: 'audio-es',
                    label: 'Espa√±ol',
                    language: 'es',
                    kind: 'main'
                }
            ];

            player.load(sampleVideo);
            
            // Simular carregamento de trilhas
            setTimeout(() => {
                displaySubtitleTracks(subtitleTracks);
                displayAudioTracks(audioTracks);
                showNotification('üìù Legendas e üîä √Åudio dual carregados!', 'success');
            }, 2000);
            
            // Atualizar informa√ß√µes
            document.querySelector('.video-title').textContent = 'üé¨ Big Buck Bunny - Legendas & Dual √Åudio';
            document.querySelector('.video-description').textContent = 
                'V√≠deo de demonstra√ß√£o com suporte completo a legendas em m√∫ltiplos idiomas e dual √°udio. ' +
                'Experimente alternar entre Portugu√™s, Ingl√™s e Espanhol usando os controles do player. ' +
                'Legendas configuradas com estilo personalizado e posicionamento autom√°tico.';
            
            console.log('üé• V√≠deo com legendas e dual √°udio carregado:', sampleVideo);
            console.log('üìù Trilhas de legendas:', subtitleTracks);
            console.log('üîä Trilhas de √°udio:', audioTracks);
        }

        // Exibir trilhas de legendas dispon√≠veis
        function displaySubtitleTracks(tracks) {
            const container = document.getElementById('subtitle-tracks') || createSubtitleContainer();
            container.innerHTML = '<h3>üìù Legendas Dispon√≠veis:</h3>';
            
            tracks.forEach(track => {
                const trackElement = document.createElement('div');
                trackElement.style.cssText = `
                    padding: 8px 12px;
                    margin: 5px 0;
                    background: ${track.default ? '#46d369' : '#333'};
                    border-radius: 4px;
                    cursor: pointer;
                    transition: background 0.3s;
                `;
                trackElement.innerHTML = `${getLanguageInfo(track.language).flag} ${track.label} ${track.default ? '(Padr√£o)' : ''}`;
                trackElement.onclick = () => selectSubtitle(track);
                container.appendChild(trackElement);
            });
        }

        // Exibir trilhas de √°udio dispon√≠veis
        function displayAudioTracks(tracks) {
            const container = document.getElementById('audio-tracks') || createAudioContainer();
            container.innerHTML = '<h3>üîä Trilhas de √Åudio Dispon√≠veis:</h3>';
            
            tracks.forEach(track => {
                const trackElement = document.createElement('div');
                trackElement.style.cssText = `
                    padding: 8px 12px;
                    margin: 5px 0;
                    background: ${track.default ? '#46d369' : '#333'};
                    border-radius: 4px;
                    cursor: pointer;
                    transition: background 0.3s;
                `;
                trackElement.innerHTML = `${getLanguageInfo(track.language).flag} ${track.label} ${track.default ? '(Padr√£o)' : ''}`;
                trackElement.onclick = () => selectAudio(track);
                container.appendChild(trackElement);
            });
        }

        // Selecionar legenda
        function selectSubtitle(track) {
            if (player && player.enableTextTrack) {
                player.enableTextTrack(track.id);
                showNotification(`üìù Legenda alterada para: ${track.label}`, 'success');
                console.log('Legenda selecionada:', track);
            }
        }

        // Selecionar √°udio
        function selectAudio(track) {
            if (player && player.setAudioTrack) {
                player.setAudioTrack(track.id);
                showNotification(`üîä √Åudio alterado para: ${track.label}`, 'success');
                console.log('√Åudio selecionado:', track);
            }
        }

        // Criar container de legendas
        function createSubtitleContainer() {
            const container = document.createElement('div');
            container.id = 'subtitle-tracks';
            container.style.cssText = `
                position: fixed;
                top: 200px;
                right: 20px;
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 15px;
                border-radius: 8px;
                font-size: 12px;
                z-index: 1000;
                max-width: 250px;
                max-height: 200px;
                overflow-y: auto;
            `;
            document.body.appendChild(container);
            return container;
        }

        // Criar container de √°udio
        function createAudioContainer() {
            const container = document.createElement('div');
            container.id = 'audio-tracks';
            container.style.cssText = `
                position: fixed;
                top: 420px;
                right: 20px;
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 15px;
                border-radius: 8px;
                font-size: 12px;
                z-index: 1000;
                max-width: 250px;
                max-height: 200px;
                overflow-y: auto;
            `;
            document.body.appendChild(container);
            return container;
        }

        // Toggle fullscreen
        function toggleFullscreen() {
            const playerContainer = document.querySelector('.player-container');
            
            if (!document.fullscreenElement) {
                playerContainer.requestFullscreen().catch(err => {
                    console.error('Erro ao entrar em tela cheia:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }

        // Mostrar configura√ß√µes do player
        function showSettings() {
            const settingsPanel = document.getElementById('settings-panel');
            if (settingsPanel) {
                settingsPanel.style.display = settingsPanel.style.display === 'none' ? 'block' : 'none';
            }
        }

        // Esconder configura√ß√µes do player
        function hideSettings() {
            const settingsPanel = document.getElementById('settings-panel');
            if (settingsPanel) {
                settingsPanel.style.display = 'none';
            }
        }

        // Mudar qualidade
        function changeQuality() {
            const select = document.getElementById('quality-select');
            const quality = select.value;
            if (player && player.configure) {
                player.configure({ quality: quality });
                showNotification(`Qualidade alterada para: ${quality}`, 'success');
            }
        }

        // Mudar velocidade
        function changeSpeed() {
            const select = document.getElementById('speed-select');
            const speed = parseFloat(select.value);
            if (player && player.setPlaybackRate) {
                player.setPlaybackRate(speed);
                showNotification(`Velocidade alterada para: ${speed}x`, 'success');
            }
        }

        // Mudar volume
        function changeVolume() {
            const slider = document.getElementById('volume-slider');
            const value = slider.value;
            const valueDisplay = document.getElementById('volume-value');
            
            if (valueDisplay) {
                valueDisplay.textContent = `${value}%`;
            }
            
            if (player && player.setVolume) {
                player.setVolume(value / 100);
            }
        }

        // Toggle autoplay
        function toggleAutoplay() {
            const checkbox = document.getElementById('autoplay-toggle');
            const autoplay = checkbox.checked;
            localStorage.setItem('autoplay', autoplay);
            showNotification(`Reprodu√ß√£o autom√°tica: ${autoplay ? 'Ativada' : 'Desativada'}`, 'info');
        }

        // Toggle legendas
        function toggleSubtitles() {
            const checkbox = document.getElementById('subtitle-toggle');
            const subtitles = checkbox.checked;
            localStorage.setItem('subtitles', subtitles);
            showNotification(`Legendas: ${subtitles ? 'Ativadas' : 'Desativadas'}`, 'info');
        }

        // Mostrar informa√ß√µes do player
        function showPlayerInfo() {
            if (!player) {
                alert('Player ainda n√£o est√° pronto.');
                return;
            }

            const info = `
üìä Informa√ß√µes do Clappr Player:

‚úÖ Plugins Instalados: 22
üîß Vers√£o: Latest
üì± Responsivo: Sim
üåê Formatos: HLS, DASH, MP4, YouTube
üé¨ Controles: Avan√ßados
üìä Analytics: Google Analytics
üñºÔ∏è Picture-in-Picture: Sim
üì∫ Chromecast: Sim
üéØ An√∫ncios: VAST/IMA
üîä √Åudio: Multi-idioma
‚èØÔ∏è DVR: Sim
üì± Mobile: Otimizado

Player est√° pronto para uso!
            `;
            
            alert(info);
        }

        // Inicializa√ß√£o quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', () => {
            // Obter par√¢metros da URL
            const urlParams = new URLSearchParams(window.location.search);
            const contentTitle = urlParams.get('content') || 'Conte√∫do';
            const contentId = urlParams.get('id') || 'default';
            const contentType = urlParams.get('type') || 'movie';

            // Atualizar t√≠tulo da p√°gina - sempre mostrar nome do sistema
            document.title = 'WebTV Prime - Streaming Premium';
            
            // Mostrar informa√ß√µes do conte√∫do
            const contentInfo = document.getElementById('content-info');
            if (contentInfo) {
                contentInfo.innerHTML = `
                    <h2>${contentTitle}</h2>
                    <p>Tipo: ${contentType === 'movie' ? 'Filme' : 'S√©rie'} | ID: ${contentId}</p>
                `;
            }

            // Iniciar verifica√ß√£o de plugins
            setTimeout(() => {
                checkPluginInstallation();
                // Carregar v√≠deo automaticamente ap√≥s 2 segundos
                setTimeout(() => {
                    loadSampleVideo();
                }, 2000);
            }, 1000);
        });

        // Event listeners para controles
        document.addEventListener('keydown', (e) => {
            if (e.key === 'f' || e.key === 'F') {
                e.preventDefault();
                toggleFullscreen();
            }
            if (e.key === ' ' && player) {
                e.preventDefault();
                player.togglePlay();
            }
        });
    </script>
</body>
</html>
